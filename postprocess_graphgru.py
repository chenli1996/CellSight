import matplotlib.pyplot as plt
import numpy as np
import os
import sys
import pandas as pd

def plot_loss():
    # read graphgruloss.txt.npy from ./data/
    loss = np.load('./data/graphgruloss.txt.npy')
    print(loss)
    # plt.plot(np.log(loss))
    plt.plot(loss)
    plt.xlabel('Epoch')
    plt.ylabel('Loss')
    plt.title('GraphGRU Loss')
    # plt.show()
    plt.savefig('./data/graphgru_training_loss.png')

def plot_test_loss():
    test_loss = '''TIME:1 ,MAE:0.03189,  MAPE: 9120.21307, MSE: 0.00657
TIME:2 ,MAE:0.03313,  MAPE: 10543.83976, MSE: 0.00658
TIME:3 ,MAE:0.03460,  MAPE: 11758.64856, MSE: 0.00678
TIME:4 ,MAE:0.03566,  MAPE: 12341.68667, MSE: 0.00711
TIME:5 ,MAE:0.03586,  MAPE: 12331.19607, MSE: 0.00730
TIME:6 ,MAE:0.03604,  MAPE: 12112.19481, MSE: 0.00762
TIME:7 ,MAE:0.03665,  MAPE: 12352.47914, MSE: 0.00788
TIME:8 ,MAE:0.03707,  MAPE: 12460.72594, MSE: 0.00813
TIME:9 ,MAE:0.03726,  MAPE: 12493.87737, MSE: 0.00827
TIME:10 ,MAE:0.03772,  MAPE: 12707.75997, MSE: 0.00848
TIME:11 ,MAE:0.03783,  MAPE: 12654.69414, MSE: 0.00863
TIME:12 ,MAE:0.03816,  MAPE: 12823.77390, MSE: 0.00878
TIME:13 ,MAE:0.03861,  MAPE: 13014.33886, MSE: 0.00899
TIME:14 ,MAE:0.03882,  MAPE: 13055.56174, MSE: 0.00915
TIME:15 ,MAE:0.03920,  MAPE: 13179.70806, MSE: 0.00935
TIME:16 ,MAE:0.03942,  MAPE: 13201.80315, MSE: 0.00954
TIME:17 ,MAE:0.03962,  MAPE: 13253.41712, MSE: 0.00969
TIME:18 ,MAE:0.03999,  MAPE: 13339.11419, MSE: 0.00990
TIME:19 ,MAE:0.04017,  MAPE: 13338.32068, MSE: 0.01006
TIME:20 ,MAE:0.04031,  MAPE: 13362.34669, MSE: 0.01018
TIME:21 ,MAE:0.04074,  MAPE: 13606.00515, MSE: 0.01034
TIME:22 ,MAE:0.04089,  MAPE: 13592.48340, MSE: 0.01050
TIME:23 ,MAE:0.04107,  MAPE: 13602.01810, MSE: 0.01066
TIME:24 ,MAE:0.04125,  MAPE: 13588.62650, MSE: 0.01085
TIME:25 ,MAE:0.04145,  MAPE: 13595.29226, MSE: 0.01102
TIME:26 ,MAE:0.04163,  MAPE: 13606.55185, MSE: 0.01118
TIME:27 ,MAE:0.04188,  MAPE: 13655.48358, MSE: 0.01135
TIME:28 ,MAE:0.04208,  MAPE: 13663.57155, MSE: 0.01152
TIME:29 ,MAE:0.04227,  MAPE: 13680.93091, MSE: 0.01169
TIME:30 ,MAE:0.04272,  MAPE: 13910.82894, MSE: 0.01187
TIME:31 ,MAE:0.04304,  MAPE: 14041.85348, MSE: 0.01203
TIME:32 ,MAE:0.04331,  MAPE: 14119.88264, MSE: 0.01220
TIME:33 ,MAE:0.04356,  MAPE: 14175.25167, MSE: 0.01237
TIME:34 ,MAE:0.04375,  MAPE: 14203.17845, MSE: 0.01253
TIME:35 ,MAE:0.04404,  MAPE: 14310.48306, MSE: 0.01269
TIME:36 ,MAE:0.04425,  MAPE: 14338.14244, MSE: 0.01285
TIME:37 ,MAE:0.04448,  MAPE: 14367.53941, MSE: 0.01302
TIME:38 ,MAE:0.04474,  MAPE: 14446.81744, MSE: 0.01318
TIME:39 ,MAE:0.04506,  MAPE: 14548.15084, MSE: 0.01335
TIME:40 ,MAE:0.04531,  MAPE: 14593.97174, MSE: 0.01352
TIME:41 ,MAE:0.04553,  MAPE: 14636.64038, MSE: 0.01368
TIME:42 ,MAE:0.04571,  MAPE: 14651.92221, MSE: 0.01383
TIME:43 ,MAE:0.04592,  MAPE: 14694.13948, MSE: 0.01397
TIME:44 ,MAE:0.04617,  MAPE: 14772.03797, MSE: 0.01410
TIME:45 ,MAE:0.04640,  MAPE: 14834.44633, MSE: 0.01424
TIME:46 ,MAE:0.04667,  MAPE: 14920.07662, MSE: 0.01438
TIME:47 ,MAE:0.04688,  MAPE: 14960.32093, MSE: 0.01452
TIME:48 ,MAE:0.04710,  MAPE: 15016.55324, MSE: 0.01465
TIME:49 ,MAE:0.04734,  MAPE: 15068.76114, MSE: 0.01478
TIME:50 ,MAE:0.04755,  MAPE: 15106.09153, MSE: 0.01491
TIME:51 ,MAE:0.04773,  MAPE: 15131.36136, MSE: 0.01502
TIME:52 ,MAE:0.04791,  MAPE: 15145.01328, MSE: 0.01514
TIME:53 ,MAE:0.04814,  MAPE: 15210.00611, MSE: 0.01526
TIME:54 ,MAE:0.04832,  MAPE: 15232.33509, MSE: 0.01537
TIME:55 ,MAE:0.04854,  MAPE: 15284.23411, MSE: 0.01549
TIME:56 ,MAE:0.04872,  MAPE: 15302.21558, MSE: 0.01560
TIME:57 ,MAE:0.04889,  MAPE: 15310.32057, MSE: 0.01570
TIME:58 ,MAE:0.04906,  MAPE: 15323.68780, MSE: 0.01581
TIME:59 ,MAE:0.04923,  MAPE: 15333.24773, MSE: 0.01591
TIME:60 ,MAE:0.04937,  MAPE: 15326.99242, MSE: 0.01601
TIME:61 ,MAE:0.04951,  MAPE: 15318.23081, MSE: 0.01611
TIME:62 ,MAE:0.04967,  MAPE: 15329.29553, MSE: 0.01620
TIME:63 ,MAE:0.04987,  MAPE: 15360.68759, MSE: 0.01631
TIME:64 ,MAE:0.05007,  MAPE: 15396.53038, MSE: 0.01640
TIME:65 ,MAE:0.05023,  MAPE: 15396.63820, MSE: 0.01650
TIME:66 ,MAE:0.05039,  MAPE: 15406.59466, MSE: 0.01659
TIME:67 ,MAE:0.05053,  MAPE: 15394.57621, MSE: 0.01668
TIME:68 ,MAE:0.05068,  MAPE: 15393.14979, MSE: 0.01677
TIME:69 ,MAE:0.05082,  MAPE: 15390.68217, MSE: 0.01685
TIME:70 ,MAE:0.05096,  MAPE: 15391.67282, MSE: 0.01693
TIME:71 ,MAE:0.05111,  MAPE: 15396.83502, MSE: 0.01701
TIME:72 ,MAE:0.05125,  MAPE: 15403.21524, MSE: 0.01709
TIME:73 ,MAE:0.05140,  MAPE: 15416.20549, MSE: 0.01716
TIME:74 ,MAE:0.05151,  MAPE: 15394.36107, MSE: 0.01723
TIME:75 ,MAE:0.05158,  MAPE: 15355.30515, MSE: 0.01729
TIME:76 ,MAE:0.05169,  MAPE: 15347.41109, MSE: 0.01735
TIME:77 ,MAE:0.05178,  MAPE: 15330.06591, MSE: 0.01740
TIME:78 ,MAE:0.05189,  MAPE: 15331.43488, MSE: 0.01744
TIME:79 ,MAE:0.05197,  MAPE: 15313.54414, MSE: 0.01749
TIME:80 ,MAE:0.05205,  MAPE: 15291.20454, MSE: 0.01753
TIME:81 ,MAE:0.05213,  MAPE: 15279.78335, MSE: 0.01756
TIME:82 ,MAE:0.05219,  MAPE: 15256.52152, MSE: 0.01759
TIME:83 ,MAE:0.05227,  MAPE: 15251.30813, MSE: 0.01762
TIME:84 ,MAE:0.05236,  MAPE: 15266.90422, MSE: 0.01764
TIME:85 ,MAE:0.05241,  MAPE: 15250.98723, MSE: 0.01766
TIME:86 ,MAE:0.05248,  MAPE: 15252.43416, MSE: 0.01767
TIME:87 ,MAE:0.05251,  MAPE: 15226.28467, MSE: 0.01768
TIME:88 ,MAE:0.05259,  MAPE: 15242.39032, MSE: 0.01770
TIME:89 ,MAE:0.05265,  MAPE: 15238.37247, MSE: 0.01770
TIME:90 ,MAE:0.05273,  MAPE: 15257.86975, MSE: 0.01771
TIME:91 ,MAE:0.05276,  MAPE: 15242.01869, MSE: 0.01771
TIME:92 ,MAE:0.05277,  MAPE: 15204.62939, MSE: 0.01772
TIME:93 ,MAE:0.05282,  MAPE: 15201.24493, MSE: 0.01773
TIME:94 ,MAE:0.05289,  MAPE: 15209.84568, MSE: 0.01774
TIME:95 ,MAE:0.05291,  MAPE: 15183.87442, MSE: 0.01775
TIME:96 ,MAE:0.05296,  MAPE: 15179.21612, MSE: 0.01776
TIME:97 ,MAE:0.05299,  MAPE: 15148.49707, MSE: 0.01778
TIME:98 ,MAE:0.05303,  MAPE: 15139.12868, MSE: 0.01780
TIME:99 ,MAE:0.05308,  MAPE: 15126.72714, MSE: 0.01781
TIME:100 ,MAE:0.05313,  MAPE: 15122.51490, MSE: 0.01783
TIME:101 ,MAE:0.05318,  MAPE: 15115.78615, MSE: 0.01785
TIME:102 ,MAE:0.05321,  MAPE: 15094.18353, MSE: 0.01787
TIME:103 ,MAE:0.05325,  MAPE: 15084.51091, MSE: 0.01789
TIME:104 ,MAE:0.05330,  MAPE: 15077.47690, MSE: 0.01791
TIME:105 ,MAE:0.05337,  MAPE: 15091.18302, MSE: 0.01794
TIME:106 ,MAE:0.05342,  MAPE: 15088.54128, MSE: 0.01796
TIME:107 ,MAE:0.05347,  MAPE: 15078.87444, MSE: 0.01799
TIME:108 ,MAE:0.05352,  MAPE: 15068.75922, MSE: 0.01801
TIME:109 ,MAE:0.05357,  MAPE: 15057.48250, MSE: 0.01805
TIME:110 ,MAE:0.05364,  MAPE: 15058.61697, MSE: 0.01808
TIME:111 ,MAE:0.05373,  MAPE: 15077.35452, MSE: 0.01812
TIME:112 ,MAE:0.05379,  MAPE: 15061.56552, MSE: 0.01816
TIME:113 ,MAE:0.05385,  MAPE: 15049.58666, MSE: 0.01820
TIME:114 ,MAE:0.05392,  MAPE: 15051.31617, MSE: 0.01823
TIME:115 ,MAE:0.05400,  MAPE: 15053.40079, MSE: 0.01828
TIME:116 ,MAE:0.05407,  MAPE: 15048.09448, MSE: 0.01832
TIME:117 ,MAE:0.05412,  MAPE: 15033.04171, MSE: 0.01836
TIME:118 ,MAE:0.05420,  MAPE: 15030.75822, MSE: 0.01840
TIME:119 ,MAE:0.05428,  MAPE: 15023.99155, MSE: 0.01845
TIME:120 ,MAE:0.05436,  MAPE: 15021.27791, MSE: 0.01850
TIME:121 ,MAE:0.05446,  MAPE: 15025.74546, MSE: 0.01855
TIME:122 ,MAE:0.05454,  MAPE: 15014.81153, MSE: 0.01861
TIME:123 ,MAE:0.05462,  MAPE: 14998.45053, MSE: 0.01866
TIME:124 ,MAE:0.05472,  MAPE: 14999.49458, MSE: 0.01872
TIME:125 ,MAE:0.05481,  MAPE: 14992.85609, MSE: 0.01878
TIME:126 ,MAE:0.05492,  MAPE: 14999.89807, MSE: 0.01884
TIME:127 ,MAE:0.05501,  MAPE: 14983.01529, MSE: 0.01890
TIME:128 ,MAE:0.05510,  MAPE: 14969.58320, MSE: 0.01896
TIME:129 ,MAE:0.05520,  MAPE: 14953.53900, MSE: 0.01904
TIME:130 ,MAE:0.05530,  MAPE: 14942.48974, MSE: 0.01910
TIME:131 ,MAE:0.05542,  MAPE: 14952.38148, MSE: 0.01916
TIME:132 ,MAE:0.05554,  MAPE: 14954.23906, MSE: 0.01923
TIME:133 ,MAE:0.05565,  MAPE: 14934.74417, MSE: 0.01931
TIME:134 ,MAE:0.05575,  MAPE: 14920.90685, MSE: 0.01937
TIME:135 ,MAE:0.05585,  MAPE: 14904.18102, MSE: 0.01944
TIME:136 ,MAE:0.05596,  MAPE: 14892.25666, MSE: 0.01951
TIME:137 ,MAE:0.05606,  MAPE: 14876.06889, MSE: 0.01958
TIME:138 ,MAE:0.05617,  MAPE: 14873.68915, MSE: 0.01964
TIME:139 ,MAE:0.05627,  MAPE: 14860.62868, MSE: 0.01971
TIME:140 ,MAE:0.05640,  MAPE: 14859.55217, MSE: 0.01979
TIME:141 ,MAE:0.05652,  MAPE: 14855.51736, MSE: 0.01986
TIME:142 ,MAE:0.05663,  MAPE: 14847.76843, MSE: 0.01992
TIME:143 ,MAE:0.05673,  MAPE: 14830.79268, MSE: 0.01999
TIME:144 ,MAE:0.05682,  MAPE: 14812.09561, MSE: 0.02005
TIME:145 ,MAE:0.05691,  MAPE: 14794.06699, MSE: 0.02011
TIME:146 ,MAE:0.05700,  MAPE: 14779.21873, MSE: 0.02016
TIME:147 ,MAE:0.05710,  MAPE: 14763.29537, MSE: 0.02023
TIME:148 ,MAE:0.05719,  MAPE: 14748.44460, MSE: 0.02028
TIME:149 ,MAE:0.05726,  MAPE: 14724.99511, MSE: 0.02033
TIME:150 ,MAE:0.05735,  MAPE: 14714.43386, MSE: 0.02038'''
    test_loss = test_loss.split('\n')
    test_loss = [x.split(',') for x in test_loss]
    test_loss_mae = [x[1].split(':') for x in test_loss]
    test_loss_mae = [float(x[1]) for x in test_loss_mae]
    print(test_loss_mae)
    plt.plot(test_loss_mae, label='MAE')
    plt.xlabel('Time')
    plt.ylabel('Loss')
    plt.title('GraphGRU Test Loss')

    test_loss_mse = [x[3].split(':') for x in test_loss]
    test_loss_mse = [float(x[1]) for x in test_loss_mse]
    print(test_loss_mse)
    plt.plot(test_loss_mse, label='MSE')
    plt.xlabel('Time')
    plt.ylabel('Loss')
    plt.title('GraphGRU Test Loss')
    plt.legend()
    # plt.show()
    plt.savefig('./data/graphgru_test_loss.png')


if __name__ == '__main__':
    # plot_loss()
    plot_test_loss()