import matplotlib.pyplot as plt
import numpy as np
import os
import sys
import pandas as pd

def plot_loss():
    # read graphgruloss.txt.npy from ./data/
    loss = np.load('./data/graphgruloss.txt.npy')
    print(loss)
    # plt.plot(np.log(loss))
    plt.plot(loss)
    plt.xlabel('Epoch')
    plt.ylabel('Loss')
    plt.title('GraphGRU Loss')
    # plt.show()
    plt.savefig('./data/graphgru_training_loss.png')

def plot_test_loss():
    test_loss = '''TIME:1 ,MAE:0.02789,  MAPE: 12232.72639, MSE: 0.00256
TIME:2 ,MAE:0.02968,  MAPE: 12236.60663, MSE: 0.00306
TIME:3 ,MAE:0.02965,  MAPE: 12405.70711, MSE: 0.00310
TIME:4 ,MAE:0.02895,  MAPE: 12143.83313, MSE: 0.00306
TIME:5 ,MAE:0.02839,  MAPE: 11351.86442, MSE: 0.00315
TIME:6 ,MAE:0.02804,  MAPE: 11131.90768, MSE: 0.00317
TIME:7 ,MAE:0.02836,  MAPE: 11311.12973, MSE: 0.00322
TIME:8 ,MAE:0.02866,  MAPE: 11400.17980, MSE: 0.00329
TIME:9 ,MAE:0.02857,  MAPE: 11210.32671, MSE: 0.00333
TIME:10 ,MAE:0.02862,  MAPE: 11114.49266, MSE: 0.00341
TIME:11 ,MAE:0.02844,  MAPE: 10928.21677, MSE: 0.00345
TIME:12 ,MAE:0.02833,  MAPE: 10877.56506, MSE: 0.00345
TIME:13 ,MAE:0.02825,  MAPE: 10763.17261, MSE: 0.00348
TIME:14 ,MAE:0.02830,  MAPE: 10779.19809, MSE: 0.00351
TIME:15 ,MAE:0.02845,  MAPE: 10804.05007, MSE: 0.00356
TIME:16 ,MAE:0.02845,  MAPE: 10748.36190, MSE: 0.00358
TIME:17 ,MAE:0.02844,  MAPE: 10600.11030, MSE: 0.00364
TIME:18 ,MAE:0.02859,  MAPE: 10610.08651, MSE: 0.00370
TIME:19 ,MAE:0.02850,  MAPE: 10419.58375, MSE: 0.00375
TIME:20 ,MAE:0.02858,  MAPE: 10386.90626, MSE: 0.00380
TIME:21 ,MAE:0.02891,  MAPE: 10544.49340, MSE: 0.00388
TIME:22 ,MAE:0.02888,  MAPE: 10464.00146, MSE: 0.00391
TIME:23 ,MAE:0.02886,  MAPE: 10341.95992, MSE: 0.00396
TIME:24 ,MAE:0.02892,  MAPE: 10265.49972, MSE: 0.00402
TIME:25 ,MAE:0.02919,  MAPE: 10386.20714, MSE: 0.00409
TIME:26 ,MAE:0.02926,  MAPE: 10323.80067, MSE: 0.00415
TIME:27 ,MAE:0.02925,  MAPE: 10179.51577, MSE: 0.00421
TIME:28 ,MAE:0.02942,  MAPE: 10222.25866, MSE: 0.00427
TIME:29 ,MAE:0.02959,  MAPE: 10255.45699, MSE: 0.00434
TIME:30 ,MAE:0.02971,  MAPE: 10237.75711, MSE: 0.00440
TIME:31 ,MAE:0.02978,  MAPE: 10152.51967, MSE: 0.00447
TIME:32 ,MAE:0.02981,  MAPE: 10083.24516, MSE: 0.00452
TIME:33 ,MAE:0.02983,  MAPE: 10028.31508, MSE: 0.00456
TIME:34 ,MAE:0.02990,  MAPE: 9985.65502, MSE: 0.00462
TIME:35 ,MAE:0.03000,  MAPE: 9952.36111, MSE: 0.00468
TIME:36 ,MAE:0.03010,  MAPE: 9915.54835, MSE: 0.00476
TIME:37 ,MAE:0.03024,  MAPE: 9883.17460, MSE: 0.00484
TIME:38 ,MAE:0.03036,  MAPE: 9833.08679, MSE: 0.00493
TIME:39 ,MAE:0.03054,  MAPE: 9870.68605, MSE: 0.00500
TIME:40 ,MAE:0.03063,  MAPE: 9839.34025, MSE: 0.00507
TIME:41 ,MAE:0.03073,  MAPE: 9781.07340, MSE: 0.00515
TIME:42 ,MAE:0.03091,  MAPE: 9784.41702, MSE: 0.00524
TIME:43 ,MAE:0.03104,  MAPE: 9810.22853, MSE: 0.00529
TIME:44 ,MAE:0.03115,  MAPE: 9769.71480, MSE: 0.00538
TIME:45 ,MAE:0.03130,  MAPE: 9777.39178, MSE: 0.00545
TIME:46 ,MAE:0.03143,  MAPE: 9768.47030, MSE: 0.00552
TIME:47 ,MAE:0.03156,  MAPE: 9731.65796, MSE: 0.00561
TIME:48 ,MAE:0.03172,  MAPE: 9731.56000, MSE: 0.00569
TIME:49 ,MAE:0.03183,  MAPE: 9686.19843, MSE: 0.00578
TIME:50 ,MAE:0.03196,  MAPE: 9669.31614, MSE: 0.00586
TIME:51 ,MAE:0.03206,  MAPE: 9629.73466, MSE: 0.00594
TIME:52 ,MAE:0.03227,  MAPE: 9674.74793, MSE: 0.00602
TIME:53 ,MAE:0.03247,  MAPE: 9680.70441, MSE: 0.00613
TIME:54 ,MAE:0.03261,  MAPE: 9635.75711, MSE: 0.00624
TIME:55 ,MAE:0.03286,  MAPE: 9676.64461, MSE: 0.00636
TIME:56 ,MAE:0.03308,  MAPE: 9702.95216, MSE: 0.00646
TIME:57 ,MAE:0.03327,  MAPE: 9713.61170, MSE: 0.00656
TIME:58 ,MAE:0.03349,  MAPE: 9733.05072, MSE: 0.00667
TIME:59 ,MAE:0.03372,  MAPE: 9750.28639, MSE: 0.00680
TIME:60 ,MAE:0.03391,  MAPE: 9742.03325, MSE: 0.00692
TIME:61 ,MAE:0.03416,  MAPE: 9772.08749, MSE: 0.00705
TIME:62 ,MAE:0.03438,  MAPE: 9759.05649, MSE: 0.00719
TIME:63 ,MAE:0.03459,  MAPE: 9748.28115, MSE: 0.00733
TIME:64 ,MAE:0.03479,  MAPE: 9725.53878, MSE: 0.00747
TIME:65 ,MAE:0.03501,  MAPE: 9724.67437, MSE: 0.00762
TIME:66 ,MAE:0.03524,  MAPE: 9725.99895, MSE: 0.00776
TIME:67 ,MAE:0.03549,  MAPE: 9757.63612, MSE: 0.00790
TIME:68 ,MAE:0.03573,  MAPE: 9760.08397, MSE: 0.00805
TIME:69 ,MAE:0.03597,  MAPE: 9758.08009, MSE: 0.00821
TIME:70 ,MAE:0.03623,  MAPE: 9791.43365, MSE: 0.00835
TIME:71 ,MAE:0.03648,  MAPE: 9815.07112, MSE: 0.00850
TIME:72 ,MAE:0.03673,  MAPE: 9845.29283, MSE: 0.00864
TIME:73 ,MAE:0.03697,  MAPE: 9862.15127, MSE: 0.00879
TIME:74 ,MAE:0.03722,  MAPE: 9873.50513, MSE: 0.00895
TIME:75 ,MAE:0.03748,  MAPE: 9894.94812, MSE: 0.00910
TIME:76 ,MAE:0.03776,  MAPE: 9921.45818, MSE: 0.00927
TIME:77 ,MAE:0.03802,  MAPE: 9959.80137, MSE: 0.00941
TIME:78 ,MAE:0.03829,  MAPE: 9987.10245, MSE: 0.00957
TIME:79 ,MAE:0.03853,  MAPE: 9992.22698, MSE: 0.00973
TIME:80 ,MAE:0.03878,  MAPE: 9995.24232, MSE: 0.00989
TIME:81 ,MAE:0.03904,  MAPE: 10020.67582, MSE: 0.01005
TIME:82 ,MAE:0.03930,  MAPE: 10052.75728, MSE: 0.01019
TIME:83 ,MAE:0.03956,  MAPE: 10087.91517, MSE: 0.01035
TIME:84 ,MAE:0.03982,  MAPE: 10108.04367, MSE: 0.01050
TIME:85 ,MAE:0.04007,  MAPE: 10115.96847, MSE: 0.01066
TIME:86 ,MAE:0.04032,  MAPE: 10134.66086, MSE: 0.01082
TIME:87 ,MAE:0.04058,  MAPE: 10171.81472, MSE: 0.01096
TIME:88 ,MAE:0.04082,  MAPE: 10195.02397, MSE: 0.01111
TIME:89 ,MAE:0.04106,  MAPE: 10207.04338, MSE: 0.01126
TIME:90 ,MAE:0.04134,  MAPE: 10243.23669, MSE: 0.01142
TIME:91 ,MAE:0.04158,  MAPE: 10267.65995, MSE: 0.01157
TIME:92 ,MAE:0.04183,  MAPE: 10300.83347, MSE: 0.01171
TIME:93 ,MAE:0.04206,  MAPE: 10318.08972, MSE: 0.01186
TIME:94 ,MAE:0.04231,  MAPE: 10351.64553, MSE: 0.01201
TIME:95 ,MAE:0.04256,  MAPE: 10387.02343, MSE: 0.01216
TIME:96 ,MAE:0.04282,  MAPE: 10433.62104, MSE: 0.01232
TIME:97 ,MAE:0.04306,  MAPE: 10470.33059, MSE: 0.01246
TIME:98 ,MAE:0.04326,  MAPE: 10477.74984, MSE: 0.01260
TIME:99 ,MAE:0.04348,  MAPE: 10510.08716, MSE: 0.01274
TIME:100 ,MAE:0.04372,  MAPE: 10564.67279, MSE: 0.01288
TIME:101 ,MAE:0.04394,  MAPE: 10606.32145, MSE: 0.01301
TIME:102 ,MAE:0.04418,  MAPE: 10671.81343, MSE: 0.01315
TIME:103 ,MAE:0.04440,  MAPE: 10726.67878, MSE: 0.01328
TIME:104 ,MAE:0.04460,  MAPE: 10755.37401, MSE: 0.01341
TIME:105 ,MAE:0.04483,  MAPE: 10812.98164, MSE: 0.01354
TIME:106 ,MAE:0.04503,  MAPE: 10847.46885, MSE: 0.01367
TIME:107 ,MAE:0.04523,  MAPE: 10889.23472, MSE: 0.01380
TIME:108 ,MAE:0.04544,  MAPE: 10940.16566, MSE: 0.01392
TIME:109 ,MAE:0.04565,  MAPE: 10986.04100, MSE: 0.01406
TIME:110 ,MAE:0.04588,  MAPE: 11037.19089, MSE: 0.01420
TIME:111 ,MAE:0.04608,  MAPE: 11076.15061, MSE: 0.01433
TIME:112 ,MAE:0.04628,  MAPE: 11107.39163, MSE: 0.01447
TIME:113 ,MAE:0.04649,  MAPE: 11147.31404, MSE: 0.01460
TIME:114 ,MAE:0.04670,  MAPE: 11180.61063, MSE: 0.01475
TIME:115 ,MAE:0.04693,  MAPE: 11241.09927, MSE: 0.01488
TIME:116 ,MAE:0.04712,  MAPE: 11271.74159, MSE: 0.01501
TIME:117 ,MAE:0.04735,  MAPE: 11328.61060, MSE: 0.01514
TIME:118 ,MAE:0.04755,  MAPE: 11341.20358, MSE: 0.01528
TIME:119 ,MAE:0.04776,  MAPE: 11373.24283, MSE: 0.01542
TIME:120 ,MAE:0.04796,  MAPE: 11397.18711, MSE: 0.01555
TIME:121 ,MAE:0.04817,  MAPE: 11420.70334, MSE: 0.01569
TIME:122 ,MAE:0.04837,  MAPE: 11443.34285, MSE: 0.01583
TIME:123 ,MAE:0.04858,  MAPE: 11475.21016, MSE: 0.01596
TIME:124 ,MAE:0.04883,  MAPE: 11530.31097, MSE: 0.01610
TIME:125 ,MAE:0.04904,  MAPE: 11554.85908, MSE: 0.01625
TIME:126 ,MAE:0.04925,  MAPE: 11562.83858, MSE: 0.01640
TIME:127 ,MAE:0.04948,  MAPE: 11594.25827, MSE: 0.01654
TIME:128 ,MAE:0.04972,  MAPE: 11634.12699, MSE: 0.01669
TIME:129 ,MAE:0.04992,  MAPE: 11646.65041, MSE: 0.01683
TIME:130 ,MAE:0.05014,  MAPE: 11659.41542, MSE: 0.01698
TIME:131 ,MAE:0.05038,  MAPE: 11688.74824, MSE: 0.01713
TIME:132 ,MAE:0.05060,  MAPE: 11699.57331, MSE: 0.01729
TIME:133 ,MAE:0.05080,  MAPE: 11702.32109, MSE: 0.01743
TIME:134 ,MAE:0.05103,  MAPE: 11731.23271, MSE: 0.01757
TIME:135 ,MAE:0.05125,  MAPE: 11746.54278, MSE: 0.01771
TIME:136 ,MAE:0.05148,  MAPE: 11765.76953, MSE: 0.01786
TIME:137 ,MAE:0.05171,  MAPE: 11780.50752, MSE: 0.01801
TIME:138 ,MAE:0.05190,  MAPE: 11768.88378, MSE: 0.01815
TIME:139 ,MAE:0.05214,  MAPE: 11789.21361, MSE: 0.01830
TIME:140 ,MAE:0.05235,  MAPE: 11787.46250, MSE: 0.01844
TIME:141 ,MAE:0.05258,  MAPE: 11811.94421, MSE: 0.01858
TIME:142 ,MAE:0.05279,  MAPE: 11816.58186, MSE: 0.01872
TIME:143 ,MAE:0.05298,  MAPE: 11807.91156, MSE: 0.01884
TIME:144 ,MAE:0.05320,  MAPE: 11816.89149, MSE: 0.01897
TIME:145 ,MAE:0.05338,  MAPE: 11815.76872, MSE: 0.01908
TIME:146 ,MAE:0.05357,  MAPE: 11819.41941, MSE: 0.01920
TIME:147 ,MAE:0.05374,  MAPE: 11805.80386, MSE: 0.01930
TIME:148 ,MAE:0.05390,  MAPE: 11788.64768, MSE: 0.01940
TIME:149 ,MAE:0.05407,  MAPE: 11784.13735, MSE: 0.01950
TIME:150 ,MAE:0.05423,  MAPE: 11772.77683, MSE: 0.01959'''
    test_loss = test_loss.split('\n')
    test_loss = [x.split(',') for x in test_loss]
    test_loss_mae = [x[1].split(':') for x in test_loss]
    test_loss_mae = [float(x[1]) for x in test_loss_mae]
    print(test_loss_mae)
    plt.plot(test_loss_mae, label='MAE')
    plt.xlabel('Time')
    plt.ylabel('Loss')
    plt.title('GraphGRU Test Loss')

    test_loss_mse = [x[3].split(':') for x in test_loss]
    test_loss_mse = [float(x[1]) for x in test_loss_mse]
    print(test_loss_mse)
    plt.plot(test_loss_mse, label='MSE')
    plt.xlabel('Time')
    plt.ylabel('Loss')
    plt.title('GraphGRU Test Loss')
    plt.legend()
    # plt.show()
    plt.savefig('./data/graphgru_test_loss.png')


if __name__ == '__main__':
    # plot_loss()
    plot_test_loss()